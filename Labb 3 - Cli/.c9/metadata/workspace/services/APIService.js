{"changed":true,"filter":false,"title":"APIService.js","tooltip":"/services/APIService.js","value":"angular\n    .module(\"clientApp\")\n    .factory('APIService', APIService);\n\nAPIService.$inject = ['$http', '$rootScope', 'API'];\n\nfunction APIService($http, $rootScope, API) \n{\n\n return function (collectionName) \n {\n  \n    var Resource = function(data) \n    {\n      angular.extend(this, data);\n    }\n\n   Resource.getSingle = function(obj) \n   {\n     var url;\n     url = API.url +obj.instanceName +\"/\" + obj.id;\n     \n     var req = {\n       method: 'GET',\n       url: url,\n       headers: {\n         'Accept': API.format,\n         'ApiKey': API.key\n       }\n     };\n     \n     return $http(req).success(function(response) \n     {\n       return response;\n     });\n   };\n   \n    Resource.getCollection = function() \n    {\n      \n      var req = {\n        method: 'GET',\n        url: API.url +collectionName,\n        headers: {\n          'Accept': API.format,\n          'ApiKey': API.key,\n        }\n      };\n      \n      return $http(req).then(function(response) \n      {\n        var result = [];\n        \n        angular.forEach(response.data, function(value, key) \n        {\n          result[key] = new Resource(value); \n        });\n        \n        return result;\n      });\n    };\n \n   Resource.create = function(obj, attr) \n   {\n     var url;\n     url = API.url +obj.instanceName;\n     \n     var req = {\n       method: 'POST',\n       url: url,\n       headers: {\n         'Accept': API.format,\n         'ApiKey': API.key,\n         'Authorization' : 'Bearer ' + $rootScope.token\n       },\n       data : attr\n     };\n     \n     return $http(req).success(function(response)\n     {\n       return response;\n     });\n   };\n   \n   Resource.delete = function(obj) \n   {\n     var url;\n     url = API.url +obj.instanceName +\"/\" + obj.id;\n     \n     var req = {\n       method: 'DELETE',\n       url: url,\n       headers: {\n         'Accept': API.format,\n         'ApiKey': API.key,\n         'Authorization': 'Bearer ' + $rootScope.token\n       }\n     };\n     \n     return $http(req).success(function(response)\n     {\n       return response;\n     });\n   };\n   \n  \n   Resource.update = function(obj, attr) \n   {\n     var url;\n     url = API.url +obj.instanceName +\"/\" + obj.id;\n     \n     var req = {\n       method: 'PUT',\n       url: url,\n       headers: {\n         'Accept': API.format,\n         'ApiKey': API.key,\n         'Authorization': 'Bearer ' + $rootScope.token\n       },\n       data: attr\n     };\n     \n     return $http(req).success(function(response) \n     {\n       return response;\n     });\n   };\n   \n   return Resource;\n }\n}","undoManager":{"mark":-2,"position":24,"stack":[[{"start":{"row":18,"column":0},"end":{"row":18,"column":29},"action":"remove","lines":["   //Hämtar en enskild resurs"],"id":2}],[{"start":{"row":39,"column":0},"end":{"row":39,"column":35},"action":"remove","lines":["     //Hämtar alla begärda resurser"],"id":3}],[{"start":{"row":38,"column":3},"end":{"row":39,"column":0},"action":"remove","lines":["",""],"id":4}],[{"start":{"row":38,"column":3},"end":{"row":39,"column":0},"action":"insert","lines":["",""],"id":5},{"start":{"row":39,"column":0},"end":{"row":39,"column":3},"action":"insert","lines":["   "]}],[{"start":{"row":66,"column":0},"end":{"row":66,"column":21},"action":"remove","lines":["   //Skapar en resurs"],"id":6}],[{"start":{"row":65,"column":3},"end":{"row":66,"column":0},"action":"remove","lines":["",""],"id":7}],[{"start":{"row":88,"column":0},"end":{"row":88,"column":23},"action":"remove","lines":["   //Tar bort en resurs"],"id":8}],[{"start":{"row":111,"column":0},"end":{"row":111,"column":27},"action":"remove","lines":["     //Uppdaterar en resurs"],"id":9}],[{"start":{"row":110,"column":3},"end":{"row":111,"column":0},"action":"remove","lines":["",""],"id":10}],[{"start":{"row":110,"column":2},"end":{"row":110,"column":3},"action":"remove","lines":[" "],"id":11}],[{"start":{"row":87,"column":3},"end":{"row":88,"column":0},"action":"remove","lines":["",""],"id":12}],[{"start":{"row":65,"column":2},"end":{"row":65,"column":3},"action":"remove","lines":[" "],"id":13}],[{"start":{"row":65,"column":1},"end":{"row":65,"column":2},"action":"remove","lines":[" "],"id":14}],[{"start":{"row":65,"column":0},"end":{"row":65,"column":1},"action":"remove","lines":[" "],"id":15}],[{"start":{"row":64,"column":1},"end":{"row":65,"column":0},"action":"remove","lines":["",""],"id":16}],[{"start":{"row":39,"column":2},"end":{"row":39,"column":3},"action":"remove","lines":[" "],"id":17}],[{"start":{"row":39,"column":1},"end":{"row":39,"column":2},"action":"remove","lines":[" "],"id":18}],[{"start":{"row":39,"column":0},"end":{"row":39,"column":1},"action":"remove","lines":[" "],"id":19}],[{"start":{"row":38,"column":3},"end":{"row":39,"column":0},"action":"remove","lines":["",""],"id":20}],[{"start":{"row":17,"column":2},"end":{"row":17,"column":3},"action":"remove","lines":[" "],"id":21}],[{"start":{"row":17,"column":1},"end":{"row":17,"column":2},"action":"remove","lines":[" "],"id":22}],[{"start":{"row":17,"column":0},"end":{"row":17,"column":1},"action":"remove","lines":[" "],"id":23}],[{"start":{"row":16,"column":4},"end":{"row":17,"column":0},"action":"remove","lines":["",""],"id":24}],[{"start":{"row":16,"column":0},"end":{"row":16,"column":4},"action":"remove","lines":["    "],"id":25}],[{"start":{"row":15,"column":5},"end":{"row":16,"column":0},"action":"remove","lines":["",""],"id":26}]]},"ace":{"folds":[],"scrolltop":1740.0000414848328,"scrollleft":0,"selection":{"start":{"row":15,"column":5},"end":{"row":15,"column":5},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1458158239215}